---
title: 5620.è¿ç»­è¿æ¥çš„äºŒè¿›åˆ¶æ•°å­—
index_img: https://cdn.jsdelivr.net/gh/yleave/imagehost/index_img/LeetCode.jpg
banner_img: 'https://cdn.jsdelivr.net/gh/yleave/imagehost/banner_img/45.jpg'
date: 2020-12-06 15:40:33
categories:
    - ç®—æ³•é¢˜
    - è§£ç­”
    - LeetCode
tags:
    - å¤§æ•°
    - æ¨¡æ‹Ÿ
---

<img src="https://pic.leetcode-cn.com/1607237469-ehWTvX-image.png" alt="image.png" style="zoom:80%;" />

&emsp;&emsp;ç¬¬ä¸€æ¬¡ JS åŒç™¾ï¼Œè™½ç„¶æ˜¯è™šå‡çš„åŒç™¾ ğŸ˜­

# å†™æ³•1 ï¼šè€¿ç›´æ¨¡æ‹Ÿ
&emsp;&emsp;ä½¿ç”¨ JS ä¸­çš„è¿›åˆ¶è½¬æ¢å‡½æ•° `toString` å’Œ `parseInt` å®ç°æ¨¡æ‹Ÿã€‚

&emsp;&emsp;`toString` èƒ½å°†åè¿›åˆ¶æ•°å­—è½¬æ¢ä¸ºä»»æ„è¿›åˆ¶æ•°å­—ï¼Œå¦‚ `(5).toString(2) = 101`

&emsp;&emsp;`parseInt` èƒ½å°†äºŒè¿›åˆ¶æ•°å­—è½¬æ¢ä¸ºåè¿›åˆ¶æ•°å­—ï¼Œå¦‚ `parseInt('101', 2) = 5`

&emsp;&emsp;ä¸è¿‡è¿™ç§å†™æ³•æ•ˆç‡å¯èƒ½æœ‰ç‚¹å·®ï¼Œä¼šè¶…æ—¶....

```js
var concatenatedBinary = function(n) {
    let mod = 1e9 + 7;
    let sum = "";
    
    for (let i = 1; i <= n; i++) {
        sum += (i).toString(2); // åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ç„¶åå­—ç¬¦ä¸²æ‹¼æ¥
        let t = parseInt(sum, 2);   // äºŒè¿›åˆ¶å­—ç¬¦ä¸²è½¬åè¿›åˆ¶åˆ¤æ–­æ˜¯å¦éœ€è¦å–ä½™
        if (t >= mod) {
            t %= mod;
            sum = (t).toString(2);
        }
    }
    
    return parseInt(sum, 2);
};
```

# å†™æ³•2 ï¼šäºŒè¿›åˆ¶ç§»ä½æ¨¡æ‹Ÿ

&emsp;&emsp;å…¶å®ï¼Œæˆ‘ä»¬ç¨å¾®åˆ—ä¸€ä¸‹äºŒè¿›åˆ¶å°±èƒ½å¤Ÿæ¯”è¾ƒç›´è§‚çš„æ‰¾åˆ°è¿æ¥çš„è§„å¾‹ï¼š

&emsp;&emsp;æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºäºŒè¿›åˆ¶ï¼Œ**æ¯æ¬¡å‘å·¦ç§»åŠ¨ä¸€ä½å°±æ˜¯ä¹˜ä¸Šä¸€ä¸ª `2`**ï¼Œå› æ­¤è‹¥å½“å‰è¦è¿æ¥çš„æ•°å­—çš„äºŒè¿›åˆ¶ä½æ•°æ˜¯ä¸¤ä½ï¼Œæˆ‘ä»¬æ¯æ¬¡ç§»åŠ¨å°±åº”è¯¥ä¹˜ä¸Šä¸€ä¸ª `4` ï¼Œä¸‰ä½äºŒè¿›åˆ¶å°±ä¹˜ä¸Šä¸€ä¸ª `8`ï¼Œç§»åŠ¨å®Œåæœ«å°¾å†åŠ ä¸Šå½“å‰çš„æ•°å­—å³å¯ã€‚

<img src="https://pic.leetcode-cn.com/1607238962-caJQLh-image.png" alt="image.png" style="zoom:80%;" />

&emsp;&emsp;è‹¥ä½¿ç”¨ JS ï¼Œéœ€è¦ä½¿ç”¨ `BigInt` ç±»å‹ï¼Œå› ä¸ºåé¢åœ¨è¿›è¡Œç§»ä½çš„æ—¶å€™å¯èƒ½ä¼šè¿‡å¤§å¯¼è‡´ç®—æœ¯æº¢å‡º...

&emsp;&emsp;å¦‚ï¼š `28399128732189371 << 1  ->  -670661256`

&emsp;&emsp;å…³äº `BigInt` çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæ™®é€šæ•°å­—åé¢åŠ ä¸€ä¸ª `n` å°±ä»£è¡¨äº† `BigInt` ç±»å‹ï¼Œå¦‚ `1n`ï¼Œæˆ–æ˜¯ä½¿ç”¨æ„é€ å™¨ `BigInt(1)`ã€‚

&emsp;&emsp;ä½¿ç”¨ `BigInt` æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ `bigint` ç±»å‹åªèƒ½ä¸ `bigint` ç±»å‹è¿›è¡Œè¿ç®—ï¼Œä¸” `Math` ä¸­çš„æ–¹æ³•ä¹Ÿä¸èƒ½åº”ç”¨åœ¨ `bigint` ç±»å‹ä¸Šã€‚


```js
var concatenatedBinary = function(n) {
    let mod = BigInt(1e9 + 7);  // JS éœ€è¦ä½¿ç”¨å¤§æ•°ï¼Œä¸ç„¶ä¼šæº¢å‡º
    let sum = 0n;
    let p = 1n;
    let l = 2n;
    
    for (let i = 1n; i <= n; i++) {
        if (i === l) {  // è‹¥ i ä¸º 2 çš„å€æ•°ï¼Œé‚£ä¹ˆç§»ä½æ•° + 1
            p++;
            l *= 2n;
        }
        sum <<= p;  // ç´¯åŠ çš„å’Œæ¯æ¬¡ç§» p ä½ï¼Œç„¶åå†åŠ ä¸Šå½“å‰å€¼
        sum += i;

        if (sum >= mod) {
            sum %= mod;
        }
    }
    
    return sum;
};
```
